<html>
<head>
	<title>Encuestas</title>
</head>
<body ng-app="BienestarApp" style="background:none;">

    <h2>Encuestas</h2>

    <link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="../../Content/custom.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/ui-grid/ui-grid-stable.min.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/ng-dialog/ngDialog.min.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/ng-dialog/ngDialog-theme-default.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/ng-dialog/ngDialog-theme-flat.css" rel="stylesheet" type="text/css" />

    <link href="../../Scripts/Utils/primeui/css/growl/growl.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/Utils/primeui/css/core/core.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/Utils/primeui/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="../../Scripts/Utils/primeui/themes/aristo/theme.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="../../Scripts/Utils/jquery/jquery-1.11.3.js"></script>
    <script type="text/javascript" src="../../Scripts/Utils/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../Scripts/Utils/primeui/js/growl/growl.js"></script>
    <script type="text/javascript" src="../../Scripts/Utils/primeui/js/core/core.js"></script>

    <script type="text/javascript" src="../../Scripts/angular.min.js"></script>
    <script type="text/javascript" src="../../Scripts/ui-grid/ui-grid-stable.min.js"></script>
    <script type="text/javascript" src="../../Scripts/ng-dialog/ngDialog.min.js"></script>
    <script type="text/javascript" src="../../Scripts/app.js"></script>


    <link href="../../Content/encuestas.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="../../Scripts/Utils/angular-messages.js"></script>
    <script type="text/javascript" src="../../Scripts/Controllers/encuestas.js?nocache=<%=RandomNumber%>"></script>
    
    <div id="messages"></div>
    <form name="formEncuesta" id="formEncuesta" ng-submit="">
    <div ng-controller="EncuestasController as Main" class="encuestas">
    

	    <div class="poll-display">
	    	<textarea id="encuestaTitulo" style="height:1em;" ng-model="poll.title" class="title" placeholder="Título de la encuesta" row="1" required></textarea><br/><br/>
	    	
	    	<!-- questions -->
	    	<div ng-repeat="question in poll.questions">
	    		<textarea ng-model="question.title" class="question" placeholder="Pregunta" row="1" required></textarea>
	    		<table border="0" style="margin-bottom:5px;"><tr>
	    			<td><select ng-options="o.v as o.n for o in [{n:'Selección múltiple', v:1},{n:'Selección única', v:2}, {n:'Párrafo', v:3}]"
			    			ng-model="question.type"></select></td>
	    			<td><button ng-show="question.type != 3" ng-click="question.addResponse()">+ Añadir opción de respuesta</button></td>
	    			<td><button ng-show="poll.questions.length > 1" ng-click="poll.removeQuestion(question.id)">- Eliminar pregunta</button></td>
	    			<td><input type="checkbox" ng-model="question.required" />* Obligatorio</button></td>
	    		</tr></table>
	    		<!-- responses -->
	    		<div ng-show="question.type != 3" ng-repeat="response in question.responses" class="response">
		    		<img ng-show="question.type == 2" src="../../Content/radio-button-30.png" class="input-img"/>
		    		<img ng-show="question.type == 1" src="../../Content/checkbox-30.png" class="input-img"/>
		    		<input type="text" ng-model="response.text" placeholder="Opción de respuesta" required />
		    		<button ng-show="question.responses.length > 1" ng-click="question.removeResponse(response.id)" class="button-remove" title="Elminar opción de respuesta">X</button>
		    	</div>
	    		<div ng-show="question.type == 3"><textarea class="question" placeholder="Párrafo de respuesta larga" row="4" readonly></textarea><br/><br/></div>
	    	</div>

	    	<button ng-click="poll.addQuestion()">Añadir pregunta</button>
    	</div>
		
		<div class="poll-preview">
			<div class="content">
		    	<div class="title">{{poll.title}}</div>
		    	<div ng-repeat="question in poll.questions" class="question">
		    		<div style="padding-top:5px;padding-bottom:5px;">{{question.title}} {{question.required ? '*' : ''}}</div>
			    	<div ng-show="question.type != 3" ng-repeat="response in question.responses" class="response">
			    		<div ng-show="question.type == 1"><input ng-model="response.checked" type="checkbox" value="{{response.id}}" ng-required="question.required && question.answereds.length == 0" ng-click="question.addAnswered(response)"/>{{response.text}}</div>
			    		<div ng-show="question.type == 2"><input ng-model="prueba2" type="radio" name="response{{question.id}}"  ng-required="question.required" value="{{response.id}}" />{{response.text}}</div>
			    	</div>
			    	<div ng-show="question.type == 3"><textarea ng-model="prueba3" ng-required="question.required" row="4" style="width:100%;"></textarea></div>
		    	</div>
			</div>
		</div>
		<br/><br/><button type="submit" >Guardar encuesta</button>
		<button ng-click="pollConsole()">Print Console</button>
    </div>
    </form>

</body>
</html>